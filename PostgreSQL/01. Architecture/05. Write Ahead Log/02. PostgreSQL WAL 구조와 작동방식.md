# PostgreSQL WAL 구조와 작동방식

#### XLOG(Transaction Log) 레코드
- 트랜잭션 로그 레코드라고 읽는다.
- 변경내용을 기록하는 단위이다.
- XLOGRecord 구조체 ([12버전 소스 링크]([https://dev.to/vkt1271/summary-of-chapter-9-write-ahead-logging-wal-from-the-book-the-internals-of-postgresql-part-3-1mef#:~:text=All%20XLOG%20records%20have%20a,and%20replaying%20of%20XLOG%20records.](https://github.com/postgres/postgres/blob/REL_12_STABLE/src/include/access/xlogrecord.h)))
  ```
  typedef struct XLogRecord
  {
     uint32          xl_tot_len;   /* total len of entire record */
     TransactionId   xl_xid;       /* xact id */
     uint32          xl_len;       /* total len of rmgr data */
     uint8           xl_info;      /* flag bits, see below */
     RmgrId          xl_rmid;      /* resource manager for this record */
     /* 2 bytes of padding here, initialize to zero */
     XLogRecPtr      xl_prev;      /* ptr to previous record in log */
     pg_crc32        xl_crc;       /* CRC for this record */
  } XLogRecord;****
  ```
  - xl_tot_len : 전체 레코드의 길이
  - xl_xid : 트랜잭션ID
  - xl_len : rmgr데이터의 총 길이
  - xl_info : flag비트
  - sl_rmid : 이 레코드에 대한 리소스매니저'
  - xl_pref : 로그 내에서의 이전 레코드 포인터
  - xl_crc : 이 레코드에 대한 CRC



# PostgreSQL WAL 작동방식

#### XLOG레코드
- Shared Buffer의 버퍼에 작업한 변경내용을 WAL버퍼에 남기는 기록

#### LSN(Log Sequence Number)
- XLOG레코드의 순번을 말한다.

#### 체크포인트(Checkpoint)
- Shared Buffer에 있는 모든 Dirty Buffer를 디스크의 데이터 디렉토리에 기록함.
- WAL 
- 체크포인트할 때마다 해당 시점의 LSN을 pg_control 파일에 기록한다. Crash Recovery 수행 시 복원할 LSN의 시작점을 알아내기 위함이다.

#### 커밋 (Commit)
- 진행중이던 트랜잭션을 완료하기 위한 명령어.
- 커밋 시점 동작
  1. XLOG레코드에 'commit'레코드 기록
  2. WAL Buffer에 적재
  3. WAL Buffer의 레코드를 DB클러스터의 WAL Segment 파일로 flush한다.



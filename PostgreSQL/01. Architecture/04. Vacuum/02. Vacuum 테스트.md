## Vacuum 테스트
Vacuum 동작으로 어떻게 과거 버전의 튜플이 제거되는지 알아보자.

#### vacuum 테스트 방법
1. test1 테이블을 신규생성하거나, test1 테이블을 truncate한다.
   ```
   create table test1 (col1 int primary key);
   or
   truncate table test1;
   ```
3. 다음 DML을 진행한다. autocommit on 상태로 둔다.
   ```
   insert into test1 (col1) values (1);
   insert into test1 (col1) values (2);
   insert into test1 (col1) values (3);

   delete from test1 where col1 = 2;

   update test1 set col1 = 5 where col1 = 3;
   ```
4. vacuum 실행하기 전의 페이지 상태 및 데이터를 조회한다.
   ```
   SELECT lp, t_xmin, t_xmax, t_ctid, t_infomask::bit(16)
           ,b'0000001100000000' & t_infomask::bit(16) = b'0000001100000000' as XMIN_FROZEN
           ,t_data
   FROM heap_page_items(get_raw_page('test1', 0));

   SELECT CTID, XMIN, XMAX, COL1 FROM test;
   ```
5. test1에 대해 vacuum을 실행한다.
   ```
   vacuum test1;
   ```
6. vacuum 실행 후 페이지 상태 및 데이터를 조회한다. 방법은 3번과 같다.

#### 테스트 결과
###### vacuum freeze 이전
```

```

###### vacuum freeze 이후
```

```




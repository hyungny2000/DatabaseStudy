## Buffer Manager
- 백엔드 프로세스가 필요로 하는 페이지를 빠르게 찾기 위한 메모리 구조.

#### Buffer Manager의 고려사항
###### 요청받은 버퍼를 가능한 빠르게 찾아서 반환해야 함.
- 해시, 배열 등의 자료구조를 적극 활용하여 항상 빠른 속도로 원하는 버퍼를 반환하도록 설계됨.

###### 동시에 여러 백엔드 프로세스의 요청을 수용해야 함.
- 데이터베이스는 기본적으로 여러 백엔드 프로세스가 요청하면서 경쟁하는 각축장임.
- 이러한 동시다발적 요청으로부터 각 구조체를 보호하기 위해 LWLoc (경량 락), Spin Lock 등의 잠금장치가 있음. 화장실 문고리를 생각하면 편함.
- 락 경합을 최소화하기 위해 공유모드/배타모드로 나누고, 큰 구조체는 잘게 쪼개서 락 개수를 늘려놓아 경합을 최소화하는데 주력함.

###### 가능한 많은 데이터를 캐싱해야 함.
- 디스크I/O가 DB성능저하의 주요 원인이다. 따라서 디스크I/O를 최소화하기 위해 그만큼 Shared Buffer 영역이 클 필요가 있다.
- 찾고자 하는 버퍼가 Shared Buffer에 있는지 여부에 따라 Cache Hit, Cache Miss라고 하는데, Cache Hit Rate (히트율)이 일반적으로 99%는 넘어야 한다.
- 버퍼가 소진될 경우 잘 안쓰이는 버퍼를 비우는 알고리즘이 필요하다. PostgreSQL에서는 일종의 LRU(Least Recently Used) 알고리즘인 Clock Sweep 알고리즘으로 이를 관리하고 있으며, 대량 조회시 버퍼가 소진되는 것을 막기 위한 Ring Buffer 영역이 존재한다.

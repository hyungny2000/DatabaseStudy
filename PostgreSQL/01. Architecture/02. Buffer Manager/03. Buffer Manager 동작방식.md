# Buffer Manager 동작 방식

## 찾고자 하는 버퍼가 Shared Buffer에 있을 경우
1. 백엔드 프로세스에서 버퍼의 BufferTag를 생성하여 Buffer Manager에 전달한다.
2. BufferTag를 해시함수에 대입하여 해시값을 얻는다.
3. 해시값에 대응되는 해시버켓을 점유하기 위해 해당 해시 세그먼트에 **BufMappingLock 락을 공유모드**로 잡는다.
4. 해시버켓에 연결된 해시 엘리먼트(데이터 엔트리) 중에서 원하는 BufferTag에 대응되는 것이 있는지 계속 탐색한다.
5. 해시 엘리먼트를 찾았으면, 버퍼 풀ID(buff_id)를 가지고 버퍼 디스크립터를 찾아간다.
6. 버퍼 디스크립터을 찾았으면 **refcount += 1, usage_count += 1 을 하여 디스크립터에 Pin을 꽂는다.**
7. Pin을 꽂았으면 해시 세그먼트의 **BufMappingLock 락을 해제**한다.

## 찾고자 하는 버퍼가 Shared Buffer에 없음. FreeBuffer가 존재하


## 찾고자 하는 버퍼가 Shared Buffer에 없음. FreeBuffer를 모두 소진한 경우

이중화 개요

1. 이중화의 정의
   데이터베이스 두 대 이상이 데이터가 동일한 상태로 운영되는 방식을 이중화라고 함.
 이중화된 데이터베이스 각각을 노드(Node)라고 칭함.

2. 이중화 구성
 이중화 구성에 따라 크게 Active/Active형식, Active/Standby 형식으로 나눌 수 있음.
  1) Active/Active형식
     - 모든 데이터베이스 노드가 읽기/쓰기 요청을 받아들일 수 있는 이중화 구성
     - 오라클 RAC, MariaDB의 Galera Cluster, Altibase 이중화 구성이 이에 속함
        PostgreSQL 양방향 논리적 이중화도 Active/Active 지원가능
  2) Active/Standby형식
     - 이중화 클러스터 내의 단 한대의 Active노드(마스터노드)만이 쓰기 요청을 받을 수 있음. 
     - 나머지 노드는 모두 읽기 요청만을 받아들이는 이중화 형식
     - MariaDB의 Master/Slave 이중화, PostgreSQL의 Log-Shipping, Streaming 이중화 등이 이에 속한다.
     - MySQL/MariaDB에서는 특히 Master/Slave라고도 칭했다.
  
3. 이중화가 필요한 이유
  1) 신속한 장애조치로 고가용성(High Availablilty) 재고
     - 재난이나 서버 고장등의 어떠한 이유에서도 서비스를 운영한다는 개념을 고가용성(High Availability)이라고 한다.
     - DB서버 단 한대로만 운영할 경우, DB서버에 장애가 생기면 서비스 전체가 마비되어 
       가용성이 심각하게 떨어짐.
     - 이중화 환경에서는 마스터DB가 서비스를 처리하다가, 마스터DB가 장애발생하면 스탠바이DB를 마스터로 전환(Fail-Over)하여
       서비스를 지속할 수 있어 가용성이 높아짐.
     - 화재와 같은 재난상황에서 DB를 복구하기 위한 DR(Disaster Recovery)구성에도 이중화는 핵심 요소임.
     - 지속적인 서비스운영을 위해 이중화는 필수요소임.
  2) 부하분산
     - Active/Standby 환경에선 마스터DB에 쓰기요청을, 스탠바이DB에 읽기요청을 할 수 있음.
       읽기 요청이 많을 경우 스탠바이DB를 원하는 만큼, 가능한 만큼 추가하여 부하분산할 수 있음.
       MaxScale, Pgpool 등의 DB프록시에서 이러한 라우팅을 구현함.
     - Active/Active 환경에선 쓰기부하 분산도 가능함.        
     

# pglogical

## 기존 논리적 이중화의 단점
- 이중화 대상 테이블 관리를 모두 수동으로 해야 함.
  1. DDL은 동기화 대상이 아님. 게시자/구독자 노드 양쪽에서 수동으로 실행해야 함.
  2. 신규 테이블 추가될 때마다 일일이 등록해야 함.
- 별도의 Replication Set 관리 개념 없음
- v16 이후에야 양방향 이중화 가능

## pglogical 특징
- 이중화 대상 테이블 관리 자동화
  1. 대상 테이블 자동 등록 가능
  2. 대상 테이블의 DDL작업 수동/자동 동기화 선택 가능
- Replication Set 객체 별도 제공
  1. 이중화 목적 별 여러 Replication Set 관리 가능.
- 양방향 이중화 제공
  - v15 이하의 DBMS에도 양방향 이중화 옵션 제공
- 시퀀스 이중화

## DB이중화 계정
- 물리적 이중화와는 달리, DB소유자 계정이 이중화도 담당하게 됨.
- 기존 DB소유자가 있다면 다음 작업을 해야 함.
   ```
   ALTER USER DB_OWNER REPLICATION;
   ```

## pglogical의 제약사항
1. Superuser가 필요함.
2. Unlogged 테이블과 Temporary 테이블은 이중화 대상에서 제외.
3. UK는 하나만 허용
4. `REPLICA IDENTITY FULL` 미지원으로 식별자 반드시 있어야 함.
5. 복제 시 FK제약조건은 적용되지 않음. FK제약조건에 위배되어도 공급자 노드에서 적용되면 구독자 노드에도 적용됨.

## Witness Server

#### 시나리오
1. 서로 지리적으로 멀리 떨어진 마스터/스탠바이 이중화 환경
2. 스탠바이에서 마스터DB와 통신이 안됨을 감지함.스탠바이 서버는 이를 마스터DB에 문제가 있는 것으로 판단하고 마스터로 승격함
4. 하지만 마스터DB는 정상적으로 서비스하고 있음이 확인됨. 마스터/스탠바이 구간의 네트워크 이슈 때문에 통신이 안되었음.
5. 결국 마스터DB와 스탠바이DB간의 데이터가 어긋나는 Split-Brain이 발생함.

#### Witness Server가 있었다면....
1. 마스터DB와 동일한 지역, 동일한 네트워크 내에 증인 역할의 서버 (Witness Server)를 가동함.
2. 스탠바이에서 마스터DB와 통신이 안될 때, Witness(증인) 서버에 통신을 시도함. 이 때
   - Witness Server와의 통신이 원활하다면 마스터DB 자체의 문제로 판단. 스스로 Failover하여 마스터로 승격함
   - Witness Server와의 통신마저 안된다면 마스터DB가 아닌 원격지 네트워크 문제로 판단. 마스터DB 동작은 원활하다고 판단하여 Failover를 유보함.

#### Witness Server의 특징
1. 마스터DB와 **동일한 지역, 동일 네트워크**에서 마스터 서버와 통신이 가능해야 함.
2. 당연히 스탠바이DB와도 통신이 되어야 함.
3. Witness Server는 마스터DB의 생사여부를 알려주는 증인같은 서버일 뿐, 스트리밍 이중화에 참여하지 않고, repmgr 관리 등의 역할은 전혀 하지 않음. 별 특징이 없는 평범한 PostgreSQL DB서버임.

   